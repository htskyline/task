<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 05</title>
    <style>
        #display span{
            background: red;
            width: 20px;
            margin: 1px ;
            color: white;
        }
        #display{
            margin-top: 150px;
        }
    </style>
  </head>
<body>

    <input type="text" id="numberTemp">
    <input type="button" onclick="addLeft()" value="左侧入" />
    <input type="button" onclick="addRight()" value="右侧入" />
    <input type="button" onclick="delLeft()" value="左侧出" />
    <input type="button" onclick="delRight()" value="右侧出" />
    <input type="button" onclick="bubbleSort()" value="冒泡排序法"/>
    <ul id="display">

    </ul>

<script type="text/javascript">
    var List = document.getElementById('display');
    var Num = document.getElementById("numberTemp");
    var numArray = new Array();
    function addLeft()//左侧入
    {
        if(checkNum(Num.value))
        {
            var node=document.createElement("span");
            //var textNode=document.createTextNode("");
            //node.appendChild(textNode);
            List.insertBefore(node,List.childNodes[0]);
            List.childNodes[0].style.padding = Num.value +"px"+" "+10+"px"+" "+10+"px";
            List.childNodes[0].style.height = Num.value + "px";
            //改变childNode高度
        }
        delClick();
    }

    function addRight()//右侧入
    {
        if(checkNum(Num.value))
        {
            var node=document.createElement("span");
            var textNode=document.createTextNode("");
            node.appendChild(textNode);
            List.appendChild(node);
            List.childNodes[List.childNodes.length-1].style.padding = Num.value +"px"+" "+10+"px"+" "+10+"px";
            List.childNodes[List.childNodes.length-1].style.height = Num.value + "px";
            //改变childNode高度
        }
        delClick();
    }

    function delLeft()//左侧出
    {
        alert(List.childNodes[0].innerHTML);
        List.removeChild(List.childNodes[0]);
    }

    function delRight()//右侧出
    {
        alert(List.lastChild.innerHTML);
        List.removeChild(List.lastChild);
    }


    function checkNum(num)//检查输入的数字合法性
    { 
    　　if (isNaN(num)) 
        { 
    　　　　alert("请输入数字"); 
    　　　　return false;
        } 
        else if(num<10||num>100)
        {
            alert("请输入10~100的数字");
            return false;
        }
        else if(checkList())
        {
            alert("队列已达60，不可继续增加");
            return false;
        }
        else return true;
    }

    function checkList()
    {
        if(List.childNodes.length>60)
        {
            return true;
        }
        else return false;
    }

    function delClick()//点击元素删除
    {
        for (var i = 0; i < List.childNodes.length; i++) 
        {
  	        List.childNodes[i].onclick = function() {
  	        this.parentNode.removeChild(this);	
  	        };
        }
    }

    function bubbleSort()
    {
	    var i = 0;
	    var j = 0;
        var nodelist = List.children;
        var len = nodelist.length;
	    var timer =  setInterval( function(){
            if( i == len )
            {
                clearInterval( timer );
                alert("冒泡排序完成。");
            }
            if( j==(len-i-1) )
            {
                i++;
                j=0;
            }
            var num1 = parseInt( nodelist[j].style.height,10 );
            var num2 = parseInt( nodelist[j+1].style.height,10 );
            if( num1 > num2)
            {   
                nodelist[j].style.padding = num2 +"px"+" "+10+"px"+" "+10+"px";
                nodelist[j].style.height = num2 + "px";
                nodelist[j+1].style.padding = num1 +"px"+" "+10+"px"+" "+10+"px";
                nodelist[j+1].style.height = num1 + "px";
            }
            j++;
	    },100);
	}
        
</script>
</body>
</html>